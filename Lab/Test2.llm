z = 'z .
s = 's .

0 = z .
1 = s z .
2 = s 1 .
3 = s 2 .
4 = s 3 .
5 = s 4 .
6 = s 5 .
7 = s 6 .
8 = s 7 .

add =
    'add [
        | 0 %n %n #
        | (s %n1) %n2 (s %n3) # @ %n1 %n2 %n3
    ]
.

mul =
    'mul [
        | 0 %n 0 #
        | (s %n1) %n2 %n3 # @ %n1 %n2 %n4 & add %n4 %n2 %n3
    ]
.

fact =
    'fact [
        | 0 1 #
        | (s %n1) %n2 # @ %n1 %n3 & mul (s %n1) %n3 %n2
    ]

.

fact 4 %n

